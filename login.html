<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pet Store Login</title>
  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    *{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif}
    body{background:linear-gradient(135deg,#ffe9c7 40%,#ffe9c7);height:100vh;display:flex;justify-content:center;align-items:center}
    .login-container{display:flex;justify-content:center;align-items:center;width:100%}
    .login-card{background:#fff;padding:2.5rem;border-radius:20px;box-shadow:0 6px 25px rgba(0,0,0,.15);text-align:center;max-width:380px;width:100%;animation:fadeIn 1s ease-in-out}
    .logo{background:#f8b500;width:70px;height:70px;margin:0 auto 15px;border-radius:50%;display:flex;justify-content:center;align-items:center;font-size:28px;color:#fff;box-shadow:0 4px 15px rgba(248,181,0,.4)}
    .login-card h2{font-weight:600;margin-bottom:8px;color:#333}
    .subtitle{font-size:14px;color:#777;margin-bottom:20px}
    .input-group{position:relative;margin-bottom:18px}
    .input-group i{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#999}
    .input-group input{width:100%;padding:12px 12px 12px 40px;border-radius:10px;border:1px solid #ddd;outline:none;transition:.3s}
    .input-group input:focus{border-color:#f8b500;box-shadow:0 0 6px rgba(248,181,0,.4)}
    .btn{width:100%;padding:12px;border:none;border-radius:12px;background:#f8b500;color:#fff;font-size:16px;font-weight:600;cursor:pointer;transition:.3s}
    .btn:hover{background:#e09b00}
    .signup-btn{background:#2c5bf6;margin-top:10px}
    .signup-text{margin-top:15px;font-size:14px}
    .signup-text a{color:#2c5bf6;font-weight:600;text-decoration:none}
    .signup-text a:hover{text-decoration:underline}
    #message{margin-top:15px;font-size:14px;font-weight:600}
    @keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
  </style>
</head>
<body>
  <div class="login-container">
    <div class="login-card">
      <div class="logo"><i class="fa-solid fa-paw"></i></div>
      <h2>Welcome Back üêæ</h2>
      <p class="subtitle">Login to continue exploring pets & supplies</p>
      <form id="authForm">
        <div class="input-group">
          <i class="fa-solid fa-envelope"></i>
          <input type="email" id="email" placeholder="Email Address" required>
        </div>
        <div class="input-group">
          <i class="fa-solid fa-lock"></i>
          <input type="password" id="password" placeholder="Password" required>
        </div>
        <button type="submit" class="btn" id="loginBtn">Login</button>
        <button type="button" class="btn signup-btn" id="signupBtn">Sign Up</button>
      </form>
      <p class="signup-text">Don‚Äôt have an account? <a href="#" id="signupLink">Sign Up</a></p>
      <p id="message"></p>
    </div>
  </div>

  <!-- Supabase JS SDK -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    const supabaseUrl="https://nqbaglcrjycyszhnizyy.supabase.co";
    const supabaseKey="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5xYmFnbGNyanljeXN6aG5penl5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU5NDM5MjYsImV4cCI6MjA3MTUxOTkyNn0.482zwJ2PCLrtXXXApgUSfhq5C8RYiX2DaYeRZYBajSQ";
    const supabase=window.supabase.createClient(supabaseUrl,supabaseKey);
    const messageBox=document.getElementById("message");

    async function checkSession(){
      const { data } = await supabase.auth.getSession();
      if(data.session){ 
        window.location.href="index.html"; 
      }
    }
    checkSession();

    async function signUpUser(){
      const email=document.getElementById("email").value.trim();
      const password=document.getElementById("password").value.trim();

      if(!email || !password){
        messageBox.style.color="red";
        messageBox.textContent="Please enter email and password.";
        return;
      }
      if(password.length < 6){
        messageBox.style.color="red";
        messageBox.textContent="Password must be at least 6 characters.";
        return;
      }

      const { error } = await supabase.auth.signUp({ email, password });
      if(error){
        messageBox.style.color="red";
        messageBox.textContent="Signup failed: "+error.message;
      } else {
        messageBox.style.color="green";
        messageBox.textContent="Signup successful! Redirecting...";
        setTimeout(()=>{ window.location.href="index.html"; },1500);
      }
    }

    async function signInUser(){
      const email=document.getElementById("email").value.trim();
      const password=document.getElementById("password").value.trim();

      if(!email || !password){
        messageBox.style.color="red";
        messageBox.textContent="Please enter email and password.";
        return;
      }

      const { error } = await supabase.auth.signInWithPassword({ email, password });
      if(error){
        messageBox.style.color="red";
        messageBox.textContent="Login failed: "+error.message;
      } else {
        messageBox.style.color="green";
        messageBox.textContent="Login successful! Redirecting...";
        setTimeout(()=>{ window.location.href="index.html"; },1500);
      }
    }

    document.getElementById("loginBtn").addEventListener("click",e=>{
      e.preventDefault();
      signInUser();
    });

    document.getElementById("signupBtn").addEventListener("click",e=>{
      e.preventDefault();
      signUpUser();
    });

    document.getElementById("signupLink").addEventListener("click",e=>{
      e.preventDefault();
      signUpUser();
    });
  </script>
</body>
</html>
